"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/login/route";
exports.ids = ["app/api/auth/login/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:buffer");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.js&appDir=C%3A%5CUsers%5Cknsja%5CDesktop%5COdoo%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cknsja%5CDesktop%5COdoo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.js&appDir=C%3A%5CUsers%5Cknsja%5CDesktop%5COdoo%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cknsja%5CDesktop%5COdoo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_knsja_Desktop_Odoo_app_api_auth_login_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/login/route.js */ \"(rsc)/./app/api/auth/login/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/login/route\",\n        pathname: \"/api/auth/login\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/login/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\knsja\\\\Desktop\\\\Odoo\\\\app\\\\api\\\\auth\\\\login\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_knsja_Desktop_Odoo_app_api_auth_login_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/login/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGbG9naW4lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZsb2dpbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZsb2dpbiUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNrbnNqYSU1Q0Rlc2t0b3AlNUNPZG9vJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNrbnNqYSU1Q0Rlc2t0b3AlNUNPZG9vJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNnQjtBQUM3RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2V4cGVuc2UtbWFuYWdlbWVudC1zeXN0ZW0vPzU3NmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxca25zamFcXFxcRGVza3RvcFxcXFxPZG9vXFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxsb2dpblxcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9sb2dpbi9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2F1dGgvbG9naW5cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2F1dGgvbG9naW4vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxrbnNqYVxcXFxEZXNrdG9wXFxcXE9kb29cXFxcYXBwXFxcXGFwaVxcXFxhdXRoXFxcXGxvZ2luXFxcXHJvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hdXRoL2xvZ2luL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.js&appDir=C%3A%5CUsers%5Cknsja%5CDesktop%5COdoo%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cknsja%5CDesktop%5COdoo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/login/route.js":
/*!*************************************!*\
  !*** ./app/api/auth/login/route.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db_light__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/db-light */ \"(rsc)/./lib/db-light.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../lib/auth */ \"(rsc)/./lib/auth.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n\n\n\n\nasync function POST(request) {\n    try {\n        const { email, password } = await request.json();\n        // Create demo company if it doesn't exist\n        let company = _lib_db_light__WEBPACK_IMPORTED_MODULE_1__.db.getCompany(\"demo-company-id\");\n        if (!company) {\n            company = {\n                id: \"demo-company-id\",\n                name: \"Demo Company\",\n                currency: \"USD\",\n                country: \"US\",\n                createdAt: new Date(),\n                updatedAt: new Date()\n            };\n            _lib_db_light__WEBPACK_IMPORTED_MODULE_1__.db.createCompany(company);\n        }\n        // Create demo users if they don't exist\n        const demoUsers = [\n            {\n                id: \"admin-user-id\",\n                email: \"admin@company.com\",\n                name: \"Demo Admin\",\n                role: \"admin\",\n                companyId: \"demo-company-id\"\n            },\n            {\n                id: \"manager-user-id\",\n                email: \"manager@company.com\",\n                name: \"Demo Manager\",\n                role: \"manager\",\n                companyId: \"demo-company-id\",\n                managerId: \"admin-user-id\"\n            },\n            {\n                id: \"employee-user-id\",\n                email: \"employee@company.com\",\n                name: \"Demo Employee\",\n                role: \"employee\",\n                companyId: \"demo-company-id\",\n                managerId: \"manager-user-id\"\n            }\n        ];\n        // Create demo users if they don't exist\n        demoUsers.forEach((demoUser)=>{\n            if (!_lib_db_light__WEBPACK_IMPORTED_MODULE_1__.db.getUser(demoUser.id)) {\n                _lib_db_light__WEBPACK_IMPORTED_MODULE_1__.db.createUser({\n                    ...demoUser,\n                    createdAt: new Date(),\n                    updatedAt: new Date()\n                });\n            }\n        });\n        // Check if user exists\n        let user = _lib_db_light__WEBPACK_IMPORTED_MODULE_1__.db.getUserByEmail(email);\n        if (!user) {\n            // Create new user with provided email\n            const userId = (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n            user = {\n                id: userId,\n                email,\n                name: email.split(\"@\")[0],\n                role: \"admin\",\n                companyId: \"demo-company-id\",\n                createdAt: new Date(),\n                updatedAt: new Date()\n            };\n            _lib_db_light__WEBPACK_IMPORTED_MODULE_1__.db.createUser(user);\n        }\n        // Simple password check for demo\n        if (password !== \"password123\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid password. Use: password123\"\n            }, {\n                status: 401\n            });\n        }\n        // Create token\n        const token = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.createToken)(user);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            user: {\n                ...user,\n                password: undefined\n            },\n            company,\n            token\n        });\n    } catch (error) {\n        console.error(\"Login error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvbG9naW4vcm91dGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0Q7QUFDVjtBQUNLO0FBQ2Y7QUFFN0IsZUFBZU0sS0FBS0MsT0FBTztJQUNoQyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLFFBQVEsRUFBRSxHQUFHLE1BQU1GLFFBQVFHLElBQUk7UUFFOUMsMENBQTBDO1FBQzFDLElBQUlDLFVBQVVULDZDQUFFQSxDQUFDVSxVQUFVLENBQUM7UUFDNUIsSUFBSSxDQUFDRCxTQUFTO1lBQ1pBLFVBQVU7Z0JBQ1JFLElBQUk7Z0JBQ0pDLE1BQU07Z0JBQ05DLFVBQVU7Z0JBQ1ZDLFNBQVM7Z0JBQ1RDLFdBQVcsSUFBSUM7Z0JBQ2ZDLFdBQVcsSUFBSUQ7WUFDakI7WUFDQWhCLDZDQUFFQSxDQUFDa0IsYUFBYSxDQUFDVDtRQUNuQjtRQUVBLHdDQUF3QztRQUN4QyxNQUFNVSxZQUFZO1lBQ2hCO2dCQUNFUixJQUFJO2dCQUNKTCxPQUFPO2dCQUNQTSxNQUFNO2dCQUNOUSxNQUFNO2dCQUNOQyxXQUFXO1lBQ2I7WUFDQTtnQkFDRVYsSUFBSTtnQkFDSkwsT0FBTztnQkFDUE0sTUFBTTtnQkFDTlEsTUFBTTtnQkFDTkMsV0FBVztnQkFDWEMsV0FBVztZQUNiO1lBQ0E7Z0JBQ0VYLElBQUk7Z0JBQ0pMLE9BQU87Z0JBQ1BNLE1BQU07Z0JBQ05RLE1BQU07Z0JBQ05DLFdBQVc7Z0JBQ1hDLFdBQVc7WUFDYjtTQUNEO1FBRUQsd0NBQXdDO1FBQ3hDSCxVQUFVSSxPQUFPLENBQUMsQ0FBQ0M7WUFDakIsSUFBSSxDQUFDeEIsNkNBQUVBLENBQUN5QixPQUFPLENBQUNELFNBQVNiLEVBQUUsR0FBRztnQkFDNUJYLDZDQUFFQSxDQUFDMEIsVUFBVSxDQUFDO29CQUNaLEdBQUdGLFFBQVE7b0JBQ1hULFdBQVcsSUFBSUM7b0JBQ2ZDLFdBQVcsSUFBSUQ7Z0JBQ2pCO1lBQ0Y7UUFDRjtRQUVBLHVCQUF1QjtRQUN2QixJQUFJVyxPQUFPM0IsNkNBQUVBLENBQUM0QixjQUFjLENBQUN0QjtRQUU3QixJQUFJLENBQUNxQixNQUFNO1lBQ1Qsc0NBQXNDO1lBQ3RDLE1BQU1FLFNBQVMxQixnREFBTUE7WUFDckJ3QixPQUFPO2dCQUNMaEIsSUFBSWtCO2dCQUNKdkI7Z0JBQ0FNLE1BQU1OLE1BQU13QixLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ3pCVixNQUFNO2dCQUNOQyxXQUFXO2dCQUNYTixXQUFXLElBQUlDO2dCQUNmQyxXQUFXLElBQUlEO1lBQ2pCO1lBQ0FoQiw2Q0FBRUEsQ0FBQzBCLFVBQVUsQ0FBQ0M7UUFDaEI7UUFFQSxpQ0FBaUM7UUFDakMsSUFBSXBCLGFBQWEsZUFBZTtZQUM5QixPQUFPUixxREFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtnQkFBRXVCLE9BQU87WUFBcUMsR0FDOUM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLGVBQWU7UUFDZixNQUFNQyxRQUFRLE1BQU1oQyxzREFBV0EsQ0FBQzBCO1FBRWhDLE9BQU81QixxREFBWUEsQ0FBQ1MsSUFBSSxDQUFDO1lBQ3ZCbUIsTUFBTTtnQkFBRSxHQUFHQSxJQUFJO2dCQUFFcEIsVUFBVTJCO1lBQVU7WUFDckN6QjtZQUNBd0I7UUFDRjtJQUNGLEVBQUUsT0FBT0YsT0FBTztRQUNkSSxRQUFRSixLQUFLLENBQUMsZ0JBQWdCQTtRQUM5QixPQUFPaEMscURBQVlBLENBQUNTLElBQUksQ0FDdEI7WUFBRXVCLE9BQU87UUFBd0IsR0FDakM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leHBlbnNlLW1hbmFnZW1lbnQtc3lzdGVtLy4vYXBwL2FwaS9hdXRoL2xvZ2luL3JvdXRlLmpzPzhmMGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gXCIuLi8uLi8uLi8uLi9saWIvZGItbGlnaHRcIjtcclxuaW1wb3J0IHsgY3JlYXRlVG9rZW4gfSBmcm9tIFwiLi4vLi4vLi4vLi4vbGliL2F1dGhcIjtcclxuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG5cclxuICAgIC8vIENyZWF0ZSBkZW1vIGNvbXBhbnkgaWYgaXQgZG9lc24ndCBleGlzdFxyXG4gICAgbGV0IGNvbXBhbnkgPSBkYi5nZXRDb21wYW55KFwiZGVtby1jb21wYW55LWlkXCIpO1xyXG4gICAgaWYgKCFjb21wYW55KSB7XHJcbiAgICAgIGNvbXBhbnkgPSB7XHJcbiAgICAgICAgaWQ6IFwiZGVtby1jb21wYW55LWlkXCIsXHJcbiAgICAgICAgbmFtZTogXCJEZW1vIENvbXBhbnlcIixcclxuICAgICAgICBjdXJyZW5jeTogXCJVU0RcIixcclxuICAgICAgICBjb3VudHJ5OiBcIlVTXCIsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgfTtcclxuICAgICAgZGIuY3JlYXRlQ29tcGFueShjb21wYW55KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgZGVtbyB1c2VycyBpZiB0aGV5IGRvbid0IGV4aXN0XHJcbiAgICBjb25zdCBkZW1vVXNlcnMgPSBbXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogXCJhZG1pbi11c2VyLWlkXCIsXHJcbiAgICAgICAgZW1haWw6IFwiYWRtaW5AY29tcGFueS5jb21cIixcclxuICAgICAgICBuYW1lOiBcIkRlbW8gQWRtaW5cIixcclxuICAgICAgICByb2xlOiBcImFkbWluXCIsXHJcbiAgICAgICAgY29tcGFueUlkOiBcImRlbW8tY29tcGFueS1pZFwiLFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6IFwibWFuYWdlci11c2VyLWlkXCIsXHJcbiAgICAgICAgZW1haWw6IFwibWFuYWdlckBjb21wYW55LmNvbVwiLFxyXG4gICAgICAgIG5hbWU6IFwiRGVtbyBNYW5hZ2VyXCIsXHJcbiAgICAgICAgcm9sZTogXCJtYW5hZ2VyXCIsXHJcbiAgICAgICAgY29tcGFueUlkOiBcImRlbW8tY29tcGFueS1pZFwiLFxyXG4gICAgICAgIG1hbmFnZXJJZDogXCJhZG1pbi11c2VyLWlkXCIsIC8vIE1hbmFnZXIgcmVwb3J0cyB0byBhZG1pblxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6IFwiZW1wbG95ZWUtdXNlci1pZFwiLFxyXG4gICAgICAgIGVtYWlsOiBcImVtcGxveWVlQGNvbXBhbnkuY29tXCIsXHJcbiAgICAgICAgbmFtZTogXCJEZW1vIEVtcGxveWVlXCIsXHJcbiAgICAgICAgcm9sZTogXCJlbXBsb3llZVwiLFxyXG4gICAgICAgIGNvbXBhbnlJZDogXCJkZW1vLWNvbXBhbnktaWRcIixcclxuICAgICAgICBtYW5hZ2VySWQ6IFwibWFuYWdlci11c2VyLWlkXCIsXHJcbiAgICAgIH0sXHJcbiAgICBdO1xyXG5cclxuICAgIC8vIENyZWF0ZSBkZW1vIHVzZXJzIGlmIHRoZXkgZG9uJ3QgZXhpc3RcclxuICAgIGRlbW9Vc2Vycy5mb3JFYWNoKChkZW1vVXNlcikgPT4ge1xyXG4gICAgICBpZiAoIWRiLmdldFVzZXIoZGVtb1VzZXIuaWQpKSB7XHJcbiAgICAgICAgZGIuY3JlYXRlVXNlcih7XHJcbiAgICAgICAgICAuLi5kZW1vVXNlcixcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBleGlzdHNcclxuICAgIGxldCB1c2VyID0gZGIuZ2V0VXNlckJ5RW1haWwoZW1haWwpO1xyXG5cclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICAvLyBDcmVhdGUgbmV3IHVzZXIgd2l0aCBwcm92aWRlZCBlbWFpbFxyXG4gICAgICBjb25zdCB1c2VySWQgPSB1dWlkdjQoKTtcclxuICAgICAgdXNlciA9IHtcclxuICAgICAgICBpZDogdXNlcklkLFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIG5hbWU6IGVtYWlsLnNwbGl0KFwiQFwiKVswXSxcclxuICAgICAgICByb2xlOiBcImFkbWluXCIsXHJcbiAgICAgICAgY29tcGFueUlkOiBcImRlbW8tY29tcGFueS1pZFwiLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgIH07XHJcbiAgICAgIGRiLmNyZWF0ZVVzZXIodXNlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2ltcGxlIHBhc3N3b3JkIGNoZWNrIGZvciBkZW1vXHJcbiAgICBpZiAocGFzc3dvcmQgIT09IFwicGFzc3dvcmQxMjNcIikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogXCJJbnZhbGlkIHBhc3N3b3JkLiBVc2U6IHBhc3N3b3JkMTIzXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgdG9rZW5cclxuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgY3JlYXRlVG9rZW4odXNlcik7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgdXNlcjogeyAuLi51c2VyLCBwYXNzd29yZDogdW5kZWZpbmVkIH0sXHJcbiAgICAgIGNvbXBhbnksXHJcbiAgICAgIHRva2VuLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJMb2dpbiBlcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXF1ZXN0IiwiTmV4dFJlc3BvbnNlIiwiZGIiLCJjcmVhdGVUb2tlbiIsInY0IiwidXVpZHY0IiwiUE9TVCIsInJlcXVlc3QiLCJlbWFpbCIsInBhc3N3b3JkIiwianNvbiIsImNvbXBhbnkiLCJnZXRDb21wYW55IiwiaWQiLCJuYW1lIiwiY3VycmVuY3kiLCJjb3VudHJ5IiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsImNyZWF0ZUNvbXBhbnkiLCJkZW1vVXNlcnMiLCJyb2xlIiwiY29tcGFueUlkIiwibWFuYWdlcklkIiwiZm9yRWFjaCIsImRlbW9Vc2VyIiwiZ2V0VXNlciIsImNyZWF0ZVVzZXIiLCJ1c2VyIiwiZ2V0VXNlckJ5RW1haWwiLCJ1c2VySWQiLCJzcGxpdCIsImVycm9yIiwic3RhdHVzIiwidG9rZW4iLCJ1bmRlZmluZWQiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/login/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/auth.js":
/*!*********************!*\
  !*** ./lib/auth.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticateUser: () => (/* binding */ authenticateUser),\n/* harmony export */   createToken: () => (/* binding */ createToken),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/verify.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_0__);\n\n\nconst JWT_SECRET = new TextEncoder().encode(process.env.JWT_SECRET || \"your-secret-key\");\nasync function hashPassword(password) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().hash(password, 12);\n}\nasync function verifyPassword(password, hashedPassword) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().compare(password, hashedPassword);\n}\nasync function createToken(user) {\n    return new jose__WEBPACK_IMPORTED_MODULE_1__.SignJWT({\n        userId: user.id,\n        email: user.email,\n        role: user.role\n    }).setProtectedHeader({\n        alg: \"HS256\"\n    }).setIssuedAt().setExpirationTime(\"7d\").sign(JWT_SECRET);\n}\nasync function verifyToken(token) {\n    try {\n        const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_2__.jwtVerify)(token, JWT_SECRET);\n        return {\n            userId: payload.userId,\n            email: payload.email,\n            role: payload.role\n        };\n    } catch  {\n        return null;\n    }\n}\nasync function authenticateUser(email, password, db) {\n    const user = db.getUserByEmail(email);\n    if (!user) return null;\n    // For demo purposes, we'll use a simple password check\n    // In production, you'd store hashed passwords\n    if (password === \"password123\") {\n        return user;\n    }\n    return null;\n}\nfunction getCurrentUser(token, db) {\n    const payload = verifyToken(token);\n    if (!payload) return null;\n    return db.getUser(payload.userId) || null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTBDO0FBQ1o7QUFFOUIsTUFBTUcsYUFBYSxJQUFJQyxjQUFjQyxNQUFNLENBQUNDLFFBQVFDLEdBQUcsQ0FBQ0osVUFBVSxJQUFJO0FBRS9ELGVBQWVLLGFBQWFDLFFBQVE7SUFDekMsT0FBT1Asb0RBQVcsQ0FBQ08sVUFBVTtBQUMvQjtBQUVPLGVBQWVFLGVBQWVGLFFBQVEsRUFBRUcsY0FBYztJQUMzRCxPQUFPVix1REFBYyxDQUFDTyxVQUFVRztBQUNsQztBQUVPLGVBQWVFLFlBQVlDLElBQUk7SUFDcEMsT0FBTyxJQUFJZix5Q0FBT0EsQ0FBQztRQUFFZ0IsUUFBUUQsS0FBS0UsRUFBRTtRQUFFQyxPQUFPSCxLQUFLRyxLQUFLO1FBQUVDLE1BQU1KLEtBQUtJLElBQUk7SUFBQyxHQUN0RUMsa0JBQWtCLENBQUM7UUFBRUMsS0FBSztJQUFRLEdBQ2xDQyxXQUFXLEdBQ1hDLGlCQUFpQixDQUFDLE1BQ2xCQyxJQUFJLENBQUNyQjtBQUNWO0FBRU8sZUFBZXNCLFlBQVlDLEtBQUs7SUFDckMsSUFBSTtRQUNGLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEdBQUcsTUFBTTFCLCtDQUFTQSxDQUFDeUIsT0FBT3ZCO1FBQzNDLE9BQU87WUFDTGEsUUFBUVcsUUFBUVgsTUFBTTtZQUN0QkUsT0FBT1MsUUFBUVQsS0FBSztZQUNwQkMsTUFBTVEsUUFBUVIsSUFBSTtRQUNwQjtJQUNGLEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGO0FBRU8sZUFBZVMsaUJBQWlCVixLQUFLLEVBQUVULFFBQVEsRUFBRW9CLEVBQUU7SUFDeEQsTUFBTWQsT0FBT2MsR0FBR0MsY0FBYyxDQUFDWjtJQUMvQixJQUFJLENBQUNILE1BQU0sT0FBTztJQUVsQix1REFBdUQ7SUFDdkQsOENBQThDO0lBQzlDLElBQUlOLGFBQWEsZUFBZTtRQUM5QixPQUFPTTtJQUNUO0lBRUEsT0FBTztBQUNUO0FBRU8sU0FBU2dCLGVBQWVMLEtBQUssRUFBRUcsRUFBRTtJQUN0QyxNQUFNRixVQUFVRixZQUFZQztJQUM1QixJQUFJLENBQUNDLFNBQVMsT0FBTztJQUVyQixPQUFPRSxHQUFHRyxPQUFPLENBQUNMLFFBQVFYLE1BQU0sS0FBSztBQUN2QyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4cGVuc2UtbWFuYWdlbWVudC1zeXN0ZW0vLi9saWIvYXV0aC5qcz8yODdiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNpZ25KV1QsIGp3dFZlcmlmeSB9IGZyb20gJ2pvc2UnO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJztcclxuXHJcbmNvbnN0IEpXVF9TRUNSRVQgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUocHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAneW91ci1zZWNyZXQta2V5Jyk7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFzaFBhc3N3b3JkKHBhc3N3b3JkKSB7XHJcbiAgcmV0dXJuIGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMik7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZChwYXNzd29yZCwgaGFzaGVkUGFzc3dvcmQpIHtcclxuICByZXR1cm4gYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRva2VuKHVzZXIpIHtcclxuICByZXR1cm4gbmV3IFNpZ25KV1QoeyB1c2VySWQ6IHVzZXIuaWQsIGVtYWlsOiB1c2VyLmVtYWlsLCByb2xlOiB1c2VyLnJvbGUgfSlcclxuICAgIC5zZXRQcm90ZWN0ZWRIZWFkZXIoeyBhbGc6ICdIUzI1NicgfSlcclxuICAgIC5zZXRJc3N1ZWRBdCgpXHJcbiAgICAuc2V0RXhwaXJhdGlvblRpbWUoJzdkJylcclxuICAgIC5zaWduKEpXVF9TRUNSRVQpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW4pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBwYXlsb2FkIH0gPSBhd2FpdCBqd3RWZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXNlcklkOiBwYXlsb2FkLnVzZXJJZCxcclxuICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsXHJcbiAgICAgIHJvbGU6IHBheWxvYWQucm9sZSxcclxuICAgIH07XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhdXRoZW50aWNhdGVVc2VyKGVtYWlsLCBwYXNzd29yZCwgZGIpIHtcclxuICBjb25zdCB1c2VyID0gZGIuZ2V0VXNlckJ5RW1haWwoZW1haWwpO1xyXG4gIGlmICghdXNlcikgcmV0dXJuIG51bGw7XHJcblxyXG4gIC8vIEZvciBkZW1vIHB1cnBvc2VzLCB3ZSdsbCB1c2UgYSBzaW1wbGUgcGFzc3dvcmQgY2hlY2tcclxuICAvLyBJbiBwcm9kdWN0aW9uLCB5b3UnZCBzdG9yZSBoYXNoZWQgcGFzc3dvcmRzXHJcbiAgaWYgKHBhc3N3b3JkID09PSAncGFzc3dvcmQxMjMnKSB7XHJcbiAgICByZXR1cm4gdXNlcjtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50VXNlcih0b2tlbiwgZGIpIHtcclxuICBjb25zdCBwYXlsb2FkID0gdmVyaWZ5VG9rZW4odG9rZW4pO1xyXG4gIGlmICghcGF5bG9hZCkgcmV0dXJuIG51bGw7XHJcbiAgXHJcbiAgcmV0dXJuIGRiLmdldFVzZXIocGF5bG9hZC51c2VySWQpIHx8IG51bGw7XHJcbn1cclxuIl0sIm5hbWVzIjpbIlNpZ25KV1QiLCJqd3RWZXJpZnkiLCJiY3J5cHQiLCJKV1RfU0VDUkVUIiwiVGV4dEVuY29kZXIiLCJlbmNvZGUiLCJwcm9jZXNzIiwiZW52IiwiaGFzaFBhc3N3b3JkIiwicGFzc3dvcmQiLCJoYXNoIiwidmVyaWZ5UGFzc3dvcmQiLCJoYXNoZWRQYXNzd29yZCIsImNvbXBhcmUiLCJjcmVhdGVUb2tlbiIsInVzZXIiLCJ1c2VySWQiLCJpZCIsImVtYWlsIiwicm9sZSIsInNldFByb3RlY3RlZEhlYWRlciIsImFsZyIsInNldElzc3VlZEF0Iiwic2V0RXhwaXJhdGlvblRpbWUiLCJzaWduIiwidmVyaWZ5VG9rZW4iLCJ0b2tlbiIsInBheWxvYWQiLCJhdXRoZW50aWNhdGVVc2VyIiwiZGIiLCJnZXRVc2VyQnlFbWFpbCIsImdldEN1cnJlbnRVc2VyIiwiZ2V0VXNlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.js\n");

/***/ }),

/***/ "(rsc)/./lib/db-light.js":
/*!*************************!*\
  !*** ./lib/db-light.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n// Lightweight database for faster loading\n\nclass LightDatabase {\n    constructor(){\n        this.users = new Map();\n        this.companies = new Map();\n        this.expenses = new Map();\n        this.approvalRules = new Map();\n        this.approvalSequences = new Map();\n        this.approvals = new Map();\n        this.expenseCategories = new Map();\n        this.ocrResults = new Map();\n        this.initialized = false;\n    }\n    // Lazy initialization\n    async initialize() {\n        if (this.initialized) return;\n        try {\n            // Load from localStorage only when needed\n            const storedData = localStorage.getItem(\"expense_db\");\n            if (storedData) {\n                const data = JSON.parse(storedData);\n                // Restore data efficiently\n                if (data.users) this.users = new Map(Object.entries(data.users));\n                if (data.companies) this.companies = new Map(Object.entries(data.companies));\n                if (data.expenses) this.expenses = new Map(Object.entries(data.expenses));\n                if (data.approvalRules) this.approvalRules = new Map(Object.entries(data.approvalRules));\n                if (data.approvals) this.approvals = new Map(Object.entries(data.approvals));\n                if (data.expenseCategories) this.expenseCategories = new Map(Object.entries(data.expenseCategories));\n                if (data.ocrResults) this.ocrResults = new Map(Object.entries(data.ocrResults));\n            } else {\n                // Initialize with minimal sample data\n                this.initializeSampleData();\n            }\n        } catch (error) {\n            console.error(\"Error initializing database:\", error);\n            this.initializeSampleData();\n        }\n        this.initialized = true;\n    }\n    // Initialize sample data\n    initializeSampleData() {\n        const company = {\n            id: \"1\",\n            name: \"Demo Company\",\n            currency: \"USD\",\n            country: \"US\",\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        this.companies.set(company.id, company);\n        const admin = {\n            id: \"1\",\n            email: \"admin@company.com\",\n            name: \"Demo Admin\",\n            role: \"admin\",\n            companyId: \"1\",\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        const manager = {\n            id: \"2\",\n            email: \"manager@company.com\",\n            name: \"Demo Manager\",\n            role: \"manager\",\n            companyId: \"1\",\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        const employee = {\n            id: \"3\",\n            email: \"employee@company.com\",\n            name: \"Demo Employee\",\n            role: \"employee\",\n            companyId: \"1\",\n            managerId: \"2\",\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        this.users.set(admin.id, admin);\n        this.users.set(manager.id, manager);\n        this.users.set(employee.id, employee);\n    }\n    // Debounced save\n    saveToStorage() {\n        if (this.saveTimeout) {\n            clearTimeout(this.saveTimeout);\n        }\n        this.saveTimeout = setTimeout(()=>{\n            try {\n                const data = {\n                    users: Object.fromEntries(this.users),\n                    companies: Object.fromEntries(this.companies),\n                    expenses: Object.fromEntries(this.expenses),\n                    approvalRules: Object.fromEntries(this.approvalRules),\n                    approvals: Object.fromEntries(this.approvals),\n                    expenseCategories: Object.fromEntries(this.expenseCategories),\n                    ocrResults: Object.fromEntries(this.ocrResults)\n                };\n                localStorage.setItem(\"expense_db\", JSON.stringify(data));\n            } catch (error) {\n                console.error(\"Error saving data:\", error);\n            }\n        }, 200);\n    }\n    // User operations\n    async createUser(user) {\n        await this.initialize();\n        this.users.set(user.id, user);\n        this.saveToStorage();\n        return user;\n    }\n    async getUser(id) {\n        await this.initialize();\n        return this.users.get(id);\n    }\n    async getUserByEmail(email) {\n        await this.initialize();\n        return Array.from(this.users.values()).find((user)=>user.email === email);\n    }\n    async updateUser(id, updates) {\n        await this.initialize();\n        const user = this.users.get(id);\n        if (user) {\n            const updatedUser = {\n                ...user,\n                ...updates,\n                updatedAt: new Date()\n            };\n            this.users.set(id, updatedUser);\n            this.saveToStorage();\n            return updatedUser;\n        }\n        return undefined;\n    }\n    async getUsersByCompany(companyId) {\n        await this.initialize();\n        return Array.from(this.users.values()).filter((user)=>user.companyId === companyId);\n    }\n    async getUsersByManager(managerId) {\n        await this.initialize();\n        return Array.from(this.users.values()).filter((user)=>user.managerId === managerId);\n    }\n    async getManager(userId) {\n        await this.initialize();\n        const user = this.users.get(userId);\n        return user && user.managerId ? this.users.get(user.managerId) : null;\n    }\n    // Company operations\n    async createCompany(company) {\n        await this.initialize();\n        this.companies.set(company.id, company);\n        this.saveToStorage();\n        return company;\n    }\n    async getCompany(id) {\n        await this.initialize();\n        return this.companies.get(id);\n    }\n    // Expense operations\n    async createExpense(expense) {\n        await this.initialize();\n        this.expenses.set(expense.id, expense);\n        this.saveToStorage();\n        return expense;\n    }\n    async getExpense(id) {\n        await this.initialize();\n        return this.expenses.get(id);\n    }\n    async getExpensesByUser(userId) {\n        await this.initialize();\n        return Array.from(this.expenses.values()).filter((expense)=>expense.userId === userId);\n    }\n    async getExpensesByCompany(companyId) {\n        await this.initialize();\n        return Array.from(this.expenses.values()).filter((expense)=>expense.companyId === companyId);\n    }\n    async getPendingExpensesForApprover(approverId) {\n        await this.initialize();\n        return Array.from(this.expenses.values()).filter((expense)=>{\n            if (expense.status !== \"pending\") return false;\n            const approvalChain = expense.approvalChain || [];\n            const currentStep = expense.currentApprovalStep || 0;\n            if (currentStep < approvalChain.length) {\n                return approvalChain[currentStep] === approverId;\n            }\n            return false;\n        });\n    }\n    async getApprovedExpensesForApprover(approverId) {\n        await this.initialize();\n        const approvals = Array.from(this.approvals.values()).filter((approval)=>approval.approverId === approverId && approval.status === \"approved\");\n        return approvals.map((approval)=>{\n            const expense = this.expenses.get(approval.expenseId);\n            return expense ? {\n                ...expense,\n                approvalDetails: approval\n            } : null;\n        }).filter((expense)=>expense !== null);\n    }\n    async getAllExpensesForApprover(approverId) {\n        await this.initialize();\n        const pendingExpenses = await this.getPendingExpensesForApprover(approverId);\n        const approvedExpenses = await this.getApprovedExpensesForApprover(approverId);\n        return {\n            pendingExpenses: pendingExpenses.map((expense)=>({\n                    ...expense,\n                    status: \"pending\",\n                    approvalDetails: null\n                })),\n            approvedExpenses: approvedExpenses.map((expense)=>({\n                    ...expense,\n                    status: \"approved\",\n                    approvalDetails: expense.approvalDetails\n                }))\n        };\n    }\n    async updateExpense(id, updates) {\n        await this.initialize();\n        const expense = this.expenses.get(id);\n        if (expense) {\n            const updatedExpense = {\n                ...expense,\n                ...updates,\n                updatedAt: new Date()\n            };\n            this.expenses.set(id, updatedExpense);\n            this.saveToStorage();\n            return updatedExpense;\n        }\n        return undefined;\n    }\n    // Approval operations\n    async createApproval(approval) {\n        await this.initialize();\n        this.approvals.set(approval.id, approval);\n        this.saveToStorage();\n        return approval;\n    }\n    async getApprovalsByExpense(expenseId) {\n        await this.initialize();\n        return Array.from(this.approvals.values()).filter((approval)=>approval.expenseId === expenseId);\n    }\n    // Approval Rule operations\n    async createApprovalRule(rule) {\n        await this.initialize();\n        this.approvalRules.set(rule.id, rule);\n        this.saveToStorage();\n        return rule;\n    }\n    async getApprovalRulesByCompany(companyId) {\n        await this.initialize();\n        return Array.from(this.approvalRules.values()).filter((rule)=>rule.companyId === companyId && rule.isActive);\n    }\n    async getApprovalRule(id) {\n        await this.initialize();\n        return this.approvalRules.get(id);\n    }\n    async updateApprovalRule(id, updates) {\n        await this.initialize();\n        const rule = this.approvalRules.get(id);\n        if (rule) {\n            const updatedRule = {\n                ...rule,\n                ...updates,\n                updatedAt: new Date()\n            };\n            this.approvalRules.set(id, updatedRule);\n            this.saveToStorage();\n            return updatedRule;\n        }\n        return undefined;\n    }\n    async deleteApprovalRule(id) {\n        await this.initialize();\n        const rule = this.approvalRules.get(id);\n        if (rule) {\n            this.approvalRules.delete(id);\n            this.saveToStorage();\n            return true;\n        }\n        return false;\n    }\n    // Approval Sequence operations\n    async createApprovalSequence(sequence) {\n        await this.initialize();\n        this.approvalSequences.set(sequence.id, sequence);\n        this.saveToStorage();\n        return sequence;\n    }\n    async getApprovalSequencesByCompany(companyId) {\n        await this.initialize();\n        return Array.from(this.approvalSequences.values()).filter((sequence)=>sequence.companyId === companyId && sequence.isActive);\n    }\n    async getApprovalSequence(id) {\n        await this.initialize();\n        return this.approvalSequences.get(id);\n    }\n    async updateApprovalSequence(id, updates) {\n        await this.initialize();\n        const sequence = this.approvalSequences.get(id);\n        if (sequence) {\n            const updatedSequence = {\n                ...sequence,\n                ...updates,\n                updatedAt: new Date()\n            };\n            this.approvalSequences.set(id, updatedSequence);\n            this.saveToStorage();\n            return updatedSequence;\n        }\n        return undefined;\n    }\n    async deleteApprovalSequence(id) {\n        await this.initialize();\n        const sequence = this.approvalSequences.get(id);\n        if (sequence) {\n            this.approvalSequences.delete(id);\n            this.saveToStorage();\n            return true;\n        }\n        return false;\n    }\n    // Enhanced approval workflow\n    async processConditionalApproval(expenseId, approverId, status, comment) {\n        await this.initialize();\n        const expense = this.expenses.get(expenseId);\n        if (!expense) return null;\n        const approval = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            expenseId,\n            approverId,\n            status,\n            comment,\n            step: expense.currentApprovalStep || 0,\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        await this.createApproval(approval);\n        if (status === \"rejected\") {\n            return await this.updateExpense(expenseId, {\n                status: \"rejected\"\n            });\n        }\n        const approvalRules = await this.getApprovalRulesByCompany(expense.companyId);\n        const applicableRules = approvalRules.filter((rule)=>rule.minAmount <= expense.amount && rule.maxAmount >= expense.amount);\n        for (const rule of applicableRules){\n            if (await this.checkConditionalRule(expenseId, rule)) {\n                return await this.updateExpense(expenseId, {\n                    status: \"approved\"\n                });\n            }\n        }\n        const nextStep = (expense.currentApprovalStep || 0) + 1;\n        if (nextStep >= (expense.approvalChain || []).length) {\n            return await this.updateExpense(expenseId, {\n                status: \"approved\",\n                currentApprovalStep: nextStep\n            });\n        } else {\n            return await this.updateExpense(expenseId, {\n                currentApprovalStep: nextStep\n            });\n        }\n    }\n    async checkConditionalRule(expenseId, rule) {\n        await this.initialize();\n        const approvals = await this.getApprovalsByExpense(expenseId);\n        const approvedApprovals = approvals.filter((a)=>a.status === \"approved\");\n        if (rule.percentageThreshold && rule.percentageThreshold > 0) {\n            const totalApprovers = (rule.approverIds || []).length;\n            const approvedCount = approvedApprovals.length;\n            const percentage = approvedCount / totalApprovers * 100;\n            if (percentage >= rule.percentageThreshold) {\n                return true;\n            }\n        }\n        if (rule.specificApproverId) {\n            const hasSpecificApproval = approvedApprovals.some((a)=>a.approverId === rule.specificApproverId);\n            if (hasSpecificApproval) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\nconst db = new LightDatabase();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUNrRixxQkFBcUIsQ0FBQ1I7UUFDbkQsTUFBTWtDLG9CQUFvQjVHLFVBQVVxRCxNQUFNLENBQUMsQ0FBQ3dELElBQU1BLEVBQUUzQyxNQUFNLEtBQUs7UUFFL0QsSUFBSWtCLEtBQUswQixtQkFBbUIsSUFBSTFCLEtBQUswQixtQkFBbUIsR0FBRyxHQUFHO1lBQzVELE1BQU1DLGlCQUFpQixDQUFDM0IsS0FBSzRCLFdBQVcsSUFBSSxFQUFFLEVBQUUxQyxNQUFNO1lBQ3RELE1BQU0yQyxnQkFBZ0JMLGtCQUFrQnRDLE1BQU07WUFDOUMsTUFBTTRDLGFBQWEsZ0JBQWlCSCxpQkFBa0I7WUFDdEQsSUFBSUcsY0FBYzlCLEtBQUswQixtQkFBbUIsRUFBRTtnQkFDMUMsT0FBTztZQUNUO1FBQ0Y7UUFFQSxJQUFJMUIsS0FBSytCLGtCQUFrQixFQUFFO1lBQzNCLE1BQU1DLHNCQUFzQlIsa0JBQWtCUyxJQUFJLENBQ2hELENBQUNSLElBQU1BLEVBQUU1QyxVQUFVLEtBQUttQixLQUFLK0Isa0JBQWtCO1lBRWpELElBQUlDLHFCQUFxQjtnQkFDdkIsT0FBTztZQUNUO1FBQ0Y7UUFFQSxPQUFPO0lBQ1Q7QUFDRjtBQUVPLE1BQU1FLEtBQUssSUFBSTlILGdCQUFnQiIsInNvdXJjZXMiOlsid2VicGFjazovL2V4cGVuc2UtbWFuYWdlbWVudC1zeXN0ZW0vLi9saWIvZGItbGlnaHQuanM/ODcyOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMaWdodHdlaWdodCBkYXRhYmFzZSBmb3IgZmFzdGVyIGxvYWRpbmdcclxuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcclxuXHJcbmNsYXNzIExpZ2h0RGF0YWJhc2Uge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy51c2VycyA9IG5ldyBNYXAoKTtcclxuICAgIHRoaXMuY29tcGFuaWVzID0gbmV3IE1hcCgpO1xyXG4gICAgdGhpcy5leHBlbnNlcyA9IG5ldyBNYXAoKTtcclxuICAgIHRoaXMuYXBwcm92YWxSdWxlcyA9IG5ldyBNYXAoKTtcclxuICAgIHRoaXMuYXBwcm92YWxTZXF1ZW5jZXMgPSBuZXcgTWFwKCk7XHJcbiAgICB0aGlzLmFwcHJvdmFscyA9IG5ldyBNYXAoKTtcclxuICAgIHRoaXMuZXhwZW5zZUNhdGVnb3JpZXMgPSBuZXcgTWFwKCk7XHJcbiAgICB0aGlzLm9jclJlc3VsdHMgPSBuZXcgTWFwKCk7XHJcbiAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvLyBMYXp5IGluaXRpYWxpemF0aW9uXHJcbiAgYXN5bmMgaW5pdGlhbGl6ZSgpIHtcclxuICAgIGlmICh0aGlzLmluaXRpYWxpemVkKSByZXR1cm47XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIExvYWQgZnJvbSBsb2NhbFN0b3JhZ2Ugb25seSB3aGVuIG5lZWRlZFxyXG4gICAgICBjb25zdCBzdG9yZWREYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2V4cGVuc2VfZGInKTtcclxuICAgICAgaWYgKHN0b3JlZERhdGEpIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShzdG9yZWREYXRhKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBSZXN0b3JlIGRhdGEgZWZmaWNpZW50bHlcclxuICAgICAgICBpZiAoZGF0YS51c2VycykgdGhpcy51c2VycyA9IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoZGF0YS51c2VycykpO1xyXG4gICAgICAgIGlmIChkYXRhLmNvbXBhbmllcykgdGhpcy5jb21wYW5pZXMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGRhdGEuY29tcGFuaWVzKSk7XHJcbiAgICAgICAgaWYgKGRhdGEuZXhwZW5zZXMpIHRoaXMuZXhwZW5zZXMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGRhdGEuZXhwZW5zZXMpKTtcclxuICAgICAgICBpZiAoZGF0YS5hcHByb3ZhbFJ1bGVzKSB0aGlzLmFwcHJvdmFsUnVsZXMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGRhdGEuYXBwcm92YWxSdWxlcykpO1xyXG4gICAgICAgIGlmIChkYXRhLmFwcHJvdmFscykgdGhpcy5hcHByb3ZhbHMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGRhdGEuYXBwcm92YWxzKSk7XHJcbiAgICAgICAgaWYgKGRhdGEuZXhwZW5zZUNhdGVnb3JpZXMpIHRoaXMuZXhwZW5zZUNhdGVnb3JpZXMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGRhdGEuZXhwZW5zZUNhdGVnb3JpZXMpKTtcclxuICAgICAgICBpZiAoZGF0YS5vY3JSZXN1bHRzKSB0aGlzLm9jclJlc3VsdHMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGRhdGEub2NyUmVzdWx0cykpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEluaXRpYWxpemUgd2l0aCBtaW5pbWFsIHNhbXBsZSBkYXRhXHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplU2FtcGxlRGF0YSgpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgZGF0YWJhc2U6JywgZXJyb3IpO1xyXG4gICAgICB0aGlzLmluaXRpYWxpemVTYW1wbGVEYXRhKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLy8gSW5pdGlhbGl6ZSBzYW1wbGUgZGF0YVxyXG4gIGluaXRpYWxpemVTYW1wbGVEYXRhKCkge1xyXG4gICAgY29uc3QgY29tcGFueSA9IHtcclxuICAgICAgaWQ6IFwiMVwiLFxyXG4gICAgICBuYW1lOiBcIkRlbW8gQ29tcGFueVwiLFxyXG4gICAgICBjdXJyZW5jeTogXCJVU0RcIixcclxuICAgICAgY291bnRyeTogXCJVU1wiLFxyXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgfTtcclxuICAgIHRoaXMuY29tcGFuaWVzLnNldChjb21wYW55LmlkLCBjb21wYW55KTtcclxuXHJcbiAgICBjb25zdCBhZG1pbiA9IHtcclxuICAgICAgaWQ6IFwiMVwiLFxyXG4gICAgICBlbWFpbDogXCJhZG1pbkBjb21wYW55LmNvbVwiLFxyXG4gICAgICBuYW1lOiBcIkRlbW8gQWRtaW5cIixcclxuICAgICAgcm9sZTogXCJhZG1pblwiLFxyXG4gICAgICBjb21wYW55SWQ6IFwiMVwiLFxyXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBtYW5hZ2VyID0ge1xyXG4gICAgICBpZDogXCIyXCIsXHJcbiAgICAgIGVtYWlsOiBcIm1hbmFnZXJAY29tcGFueS5jb21cIixcclxuICAgICAgbmFtZTogXCJEZW1vIE1hbmFnZXJcIixcclxuICAgICAgcm9sZTogXCJtYW5hZ2VyXCIsXHJcbiAgICAgIGNvbXBhbnlJZDogXCIxXCIsXHJcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGVtcGxveWVlID0ge1xyXG4gICAgICBpZDogXCIzXCIsXHJcbiAgICAgIGVtYWlsOiBcImVtcGxveWVlQGNvbXBhbnkuY29tXCIsXHJcbiAgICAgIG5hbWU6IFwiRGVtbyBFbXBsb3llZVwiLFxyXG4gICAgICByb2xlOiBcImVtcGxveWVlXCIsXHJcbiAgICAgIGNvbXBhbnlJZDogXCIxXCIsXHJcbiAgICAgIG1hbmFnZXJJZDogXCIyXCIsXHJcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudXNlcnMuc2V0KGFkbWluLmlkLCBhZG1pbik7XHJcbiAgICB0aGlzLnVzZXJzLnNldChtYW5hZ2VyLmlkLCBtYW5hZ2VyKTtcclxuICAgIHRoaXMudXNlcnMuc2V0KGVtcGxveWVlLmlkLCBlbXBsb3llZSk7XHJcbiAgfVxyXG5cclxuICAvLyBEZWJvdW5jZWQgc2F2ZVxyXG4gIHNhdmVUb1N0b3JhZ2UoKSB7XHJcbiAgICBpZiAodGhpcy5zYXZlVGltZW91dCkge1xyXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5zYXZlVGltZW91dCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMuc2F2ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgICAgdXNlcnM6IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLnVzZXJzKSxcclxuICAgICAgICAgIGNvbXBhbmllczogT2JqZWN0LmZyb21FbnRyaWVzKHRoaXMuY29tcGFuaWVzKSxcclxuICAgICAgICAgIGV4cGVuc2VzOiBPYmplY3QuZnJvbUVudHJpZXModGhpcy5leHBlbnNlcyksXHJcbiAgICAgICAgICBhcHByb3ZhbFJ1bGVzOiBPYmplY3QuZnJvbUVudHJpZXModGhpcy5hcHByb3ZhbFJ1bGVzKSxcclxuICAgICAgICAgIGFwcHJvdmFsczogT2JqZWN0LmZyb21FbnRyaWVzKHRoaXMuYXBwcm92YWxzKSxcclxuICAgICAgICAgIGV4cGVuc2VDYXRlZ29yaWVzOiBPYmplY3QuZnJvbUVudHJpZXModGhpcy5leHBlbnNlQ2F0ZWdvcmllcyksXHJcbiAgICAgICAgICBvY3JSZXN1bHRzOiBPYmplY3QuZnJvbUVudHJpZXModGhpcy5vY3JSZXN1bHRzKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2V4cGVuc2VfZGInLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIGRhdGE6JywgZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9LCAyMDApO1xyXG4gIH1cclxuXHJcbiAgLy8gVXNlciBvcGVyYXRpb25zXHJcbiAgYXN5bmMgY3JlYXRlVXNlcih1c2VyKSB7XHJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgIHRoaXMudXNlcnMuc2V0KHVzZXIuaWQsIHVzZXIpO1xyXG4gICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcbiAgICByZXR1cm4gdXNlcjtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFVzZXIoaWQpIHtcclxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgcmV0dXJuIHRoaXMudXNlcnMuZ2V0KGlkKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFVzZXJCeUVtYWlsKGVtYWlsKSB7XHJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMudXNlcnMudmFsdWVzKCkpLmZpbmQoKHVzZXIpID0+IHVzZXIuZW1haWwgPT09IGVtYWlsKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZVVzZXIoaWQsIHVwZGF0ZXMpIHtcclxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgY29uc3QgdXNlciA9IHRoaXMudXNlcnMuZ2V0KGlkKTtcclxuICAgIGlmICh1c2VyKSB7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRVc2VyID0geyAuLi51c2VyLCAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfTtcclxuICAgICAgdGhpcy51c2Vycy5zZXQoaWQsIHVwZGF0ZWRVc2VyKTtcclxuICAgICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcbiAgICAgIHJldHVybiB1cGRhdGVkVXNlcjtcclxuICAgIH1cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRVc2Vyc0J5Q29tcGFueShjb21wYW55SWQpIHtcclxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy51c2Vycy52YWx1ZXMoKSkuZmlsdGVyKFxyXG4gICAgICAodXNlcikgPT4gdXNlci5jb21wYW55SWQgPT09IGNvbXBhbnlJZFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFVzZXJzQnlNYW5hZ2VyKG1hbmFnZXJJZCkge1xyXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnVzZXJzLnZhbHVlcygpKS5maWx0ZXIoXHJcbiAgICAgICh1c2VyKSA9PiB1c2VyLm1hbmFnZXJJZCA9PT0gbWFuYWdlcklkXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0TWFuYWdlcih1c2VySWQpIHtcclxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgY29uc3QgdXNlciA9IHRoaXMudXNlcnMuZ2V0KHVzZXJJZCk7XHJcbiAgICByZXR1cm4gdXNlciAmJiB1c2VyLm1hbmFnZXJJZCA/IHRoaXMudXNlcnMuZ2V0KHVzZXIubWFuYWdlcklkKSA6IG51bGw7XHJcbiAgfVxyXG5cclxuICAvLyBDb21wYW55IG9wZXJhdGlvbnNcclxuICBhc3luYyBjcmVhdGVDb21wYW55KGNvbXBhbnkpIHtcclxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgdGhpcy5jb21wYW5pZXMuc2V0KGNvbXBhbnkuaWQsIGNvbXBhbnkpO1xyXG4gICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcbiAgICByZXR1cm4gY29tcGFueTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldENvbXBhbnkoaWQpIHtcclxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgcmV0dXJuIHRoaXMuY29tcGFuaWVzLmdldChpZCk7XHJcbiAgfVxyXG5cclxuICAvLyBFeHBlbnNlIG9wZXJhdGlvbnNcclxuICBhc3luYyBjcmVhdGVFeHBlbnNlKGV4cGVuc2UpIHtcclxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgdGhpcy5leHBlbnNlcy5zZXQoZXhwZW5zZS5pZCwgZXhwZW5zZSk7XHJcbiAgICB0aGlzLnNhdmVUb1N0b3JhZ2UoKTtcclxuICAgIHJldHVybiBleHBlbnNlO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0RXhwZW5zZShpZCkge1xyXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgICByZXR1cm4gdGhpcy5leHBlbnNlcy5nZXQoaWQpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0RXhwZW5zZXNCeVVzZXIodXNlcklkKSB7XHJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZXhwZW5zZXMudmFsdWVzKCkpLmZpbHRlcihcclxuICAgICAgKGV4cGVuc2UpID0+IGV4cGVuc2UudXNlcklkID09PSB1c2VySWRcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRFeHBlbnNlc0J5Q29tcGFueShjb21wYW55SWQpIHtcclxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5leHBlbnNlcy52YWx1ZXMoKSkuZmlsdGVyKFxyXG4gICAgICAoZXhwZW5zZSkgPT4gZXhwZW5zZS5jb21wYW55SWQgPT09IGNvbXBhbnlJZFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFBlbmRpbmdFeHBlbnNlc0ZvckFwcHJvdmVyKGFwcHJvdmVySWQpIHtcclxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5leHBlbnNlcy52YWx1ZXMoKSkuZmlsdGVyKChleHBlbnNlKSA9PiB7XHJcbiAgICAgIGlmIChleHBlbnNlLnN0YXR1cyAhPT0gXCJwZW5kaW5nXCIpIHJldHVybiBmYWxzZTtcclxuICAgICAgY29uc3QgYXBwcm92YWxDaGFpbiA9IGV4cGVuc2UuYXBwcm92YWxDaGFpbiB8fCBbXTtcclxuICAgICAgY29uc3QgY3VycmVudFN0ZXAgPSBleHBlbnNlLmN1cnJlbnRBcHByb3ZhbFN0ZXAgfHwgMDtcclxuICAgICAgaWYgKGN1cnJlbnRTdGVwIDwgYXBwcm92YWxDaGFpbi5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gYXBwcm92YWxDaGFpbltjdXJyZW50U3RlcF0gPT09IGFwcHJvdmVySWQ7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRBcHByb3ZlZEV4cGVuc2VzRm9yQXBwcm92ZXIoYXBwcm92ZXJJZCkge1xyXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgICBjb25zdCBhcHByb3ZhbHMgPSBBcnJheS5mcm9tKHRoaXMuYXBwcm92YWxzLnZhbHVlcygpKS5maWx0ZXIoXHJcbiAgICAgIChhcHByb3ZhbCkgPT5cclxuICAgICAgICBhcHByb3ZhbC5hcHByb3ZlcklkID09PSBhcHByb3ZlcklkICYmIGFwcHJvdmFsLnN0YXR1cyA9PT0gXCJhcHByb3ZlZFwiXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBhcHByb3ZhbHNcclxuICAgICAgLm1hcCgoYXBwcm92YWwpID0+IHtcclxuICAgICAgICBjb25zdCBleHBlbnNlID0gdGhpcy5leHBlbnNlcy5nZXQoYXBwcm92YWwuZXhwZW5zZUlkKTtcclxuICAgICAgICByZXR1cm4gZXhwZW5zZSA/IHsgLi4uZXhwZW5zZSwgYXBwcm92YWxEZXRhaWxzOiBhcHByb3ZhbCB9IDogbnVsbDtcclxuICAgICAgfSlcclxuICAgICAgLmZpbHRlcigoZXhwZW5zZSkgPT4gZXhwZW5zZSAhPT0gbnVsbCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRBbGxFeHBlbnNlc0ZvckFwcHJvdmVyKGFwcHJvdmVySWQpIHtcclxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgY29uc3QgcGVuZGluZ0V4cGVuc2VzID0gYXdhaXQgdGhpcy5nZXRQZW5kaW5nRXhwZW5zZXNGb3JBcHByb3ZlcihhcHByb3ZlcklkKTtcclxuICAgIGNvbnN0IGFwcHJvdmVkRXhwZW5zZXMgPSBhd2FpdCB0aGlzLmdldEFwcHJvdmVkRXhwZW5zZXNGb3JBcHByb3ZlcihhcHByb3ZlcklkKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwZW5kaW5nRXhwZW5zZXM6IHBlbmRpbmdFeHBlbnNlcy5tYXAoKGV4cGVuc2UpID0+ICh7XHJcbiAgICAgICAgLi4uZXhwZW5zZSxcclxuICAgICAgICBzdGF0dXM6IFwicGVuZGluZ1wiLFxyXG4gICAgICAgIGFwcHJvdmFsRGV0YWlsczogbnVsbCxcclxuICAgICAgfSkpLFxyXG4gICAgICBhcHByb3ZlZEV4cGVuc2VzOiBhcHByb3ZlZEV4cGVuc2VzLm1hcCgoZXhwZW5zZSkgPT4gKHtcclxuICAgICAgICAuLi5leHBlbnNlLFxyXG4gICAgICAgIHN0YXR1czogXCJhcHByb3ZlZFwiLFxyXG4gICAgICAgIGFwcHJvdmFsRGV0YWlsczogZXhwZW5zZS5hcHByb3ZhbERldGFpbHMsXHJcbiAgICAgIH0pKSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVFeHBlbnNlKGlkLCB1cGRhdGVzKSB7XHJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgIGNvbnN0IGV4cGVuc2UgPSB0aGlzLmV4cGVuc2VzLmdldChpZCk7XHJcbiAgICBpZiAoZXhwZW5zZSkge1xyXG4gICAgICBjb25zdCB1cGRhdGVkRXhwZW5zZSA9IHsgLi4uZXhwZW5zZSwgLi4udXBkYXRlcywgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpIH07XHJcbiAgICAgIHRoaXMuZXhwZW5zZXMuc2V0KGlkLCB1cGRhdGVkRXhwZW5zZSk7XHJcbiAgICAgIHRoaXMuc2F2ZVRvU3RvcmFnZSgpO1xyXG4gICAgICByZXR1cm4gdXBkYXRlZEV4cGVuc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgLy8gQXBwcm92YWwgb3BlcmF0aW9uc1xyXG4gIGFzeW5jIGNyZWF0ZUFwcHJvdmFsKGFwcHJvdmFsKSB7XHJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgIHRoaXMuYXBwcm92YWxzLnNldChhcHByb3ZhbC5pZCwgYXBwcm92YWwpO1xyXG4gICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcbiAgICByZXR1cm4gYXBwcm92YWw7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRBcHByb3ZhbHNCeUV4cGVuc2UoZXhwZW5zZUlkKSB7XHJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYXBwcm92YWxzLnZhbHVlcygpKS5maWx0ZXIoXHJcbiAgICAgIChhcHByb3ZhbCkgPT4gYXBwcm92YWwuZXhwZW5zZUlkID09PSBleHBlbnNlSWRcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBBcHByb3ZhbCBSdWxlIG9wZXJhdGlvbnNcclxuICBhc3luYyBjcmVhdGVBcHByb3ZhbFJ1bGUocnVsZSkge1xyXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgICB0aGlzLmFwcHJvdmFsUnVsZXMuc2V0KHJ1bGUuaWQsIHJ1bGUpO1xyXG4gICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcbiAgICByZXR1cm4gcnVsZTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldEFwcHJvdmFsUnVsZXNCeUNvbXBhbnkoY29tcGFueUlkKSB7XHJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYXBwcm92YWxSdWxlcy52YWx1ZXMoKSkuZmlsdGVyKFxyXG4gICAgICAocnVsZSkgPT4gcnVsZS5jb21wYW55SWQgPT09IGNvbXBhbnlJZCAmJiBydWxlLmlzQWN0aXZlXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0QXBwcm92YWxSdWxlKGlkKSB7XHJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgIHJldHVybiB0aGlzLmFwcHJvdmFsUnVsZXMuZ2V0KGlkKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZUFwcHJvdmFsUnVsZShpZCwgdXBkYXRlcykge1xyXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgICBjb25zdCBydWxlID0gdGhpcy5hcHByb3ZhbFJ1bGVzLmdldChpZCk7XHJcbiAgICBpZiAocnVsZSkge1xyXG4gICAgICBjb25zdCB1cGRhdGVkUnVsZSA9IHsgLi4ucnVsZSwgLi4udXBkYXRlcywgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpIH07XHJcbiAgICAgIHRoaXMuYXBwcm92YWxSdWxlcy5zZXQoaWQsIHVwZGF0ZWRSdWxlKTtcclxuICAgICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcbiAgICAgIHJldHVybiB1cGRhdGVkUnVsZTtcclxuICAgIH1cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZWxldGVBcHByb3ZhbFJ1bGUoaWQpIHtcclxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgY29uc3QgcnVsZSA9IHRoaXMuYXBwcm92YWxSdWxlcy5nZXQoaWQpO1xyXG4gICAgaWYgKHJ1bGUpIHtcclxuICAgICAgdGhpcy5hcHByb3ZhbFJ1bGVzLmRlbGV0ZShpZCk7XHJcbiAgICAgIHRoaXMuc2F2ZVRvU3RvcmFnZSgpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vIEFwcHJvdmFsIFNlcXVlbmNlIG9wZXJhdGlvbnNcclxuICBhc3luYyBjcmVhdGVBcHByb3ZhbFNlcXVlbmNlKHNlcXVlbmNlKSB7XHJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgIHRoaXMuYXBwcm92YWxTZXF1ZW5jZXMuc2V0KHNlcXVlbmNlLmlkLCBzZXF1ZW5jZSk7XHJcbiAgICB0aGlzLnNhdmVUb1N0b3JhZ2UoKTtcclxuICAgIHJldHVybiBzZXF1ZW5jZTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldEFwcHJvdmFsU2VxdWVuY2VzQnlDb21wYW55KGNvbXBhbnlJZCkge1xyXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmFwcHJvdmFsU2VxdWVuY2VzLnZhbHVlcygpKS5maWx0ZXIoXHJcbiAgICAgIChzZXF1ZW5jZSkgPT4gc2VxdWVuY2UuY29tcGFueUlkID09PSBjb21wYW55SWQgJiYgc2VxdWVuY2UuaXNBY3RpdmVcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRBcHByb3ZhbFNlcXVlbmNlKGlkKSB7XHJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgIHJldHVybiB0aGlzLmFwcHJvdmFsU2VxdWVuY2VzLmdldChpZCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVBcHByb3ZhbFNlcXVlbmNlKGlkLCB1cGRhdGVzKSB7XHJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgIGNvbnN0IHNlcXVlbmNlID0gdGhpcy5hcHByb3ZhbFNlcXVlbmNlcy5nZXQoaWQpO1xyXG4gICAgaWYgKHNlcXVlbmNlKSB7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRTZXF1ZW5jZSA9IHsgLi4uc2VxdWVuY2UsIC4uLnVwZGF0ZXMsIHVwZGF0ZWRBdDogbmV3IERhdGUoKSB9O1xyXG4gICAgICB0aGlzLmFwcHJvdmFsU2VxdWVuY2VzLnNldChpZCwgdXBkYXRlZFNlcXVlbmNlKTtcclxuICAgICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcbiAgICAgIHJldHVybiB1cGRhdGVkU2VxdWVuY2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlQXBwcm92YWxTZXF1ZW5jZShpZCkge1xyXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgICBjb25zdCBzZXF1ZW5jZSA9IHRoaXMuYXBwcm92YWxTZXF1ZW5jZXMuZ2V0KGlkKTtcclxuICAgIGlmIChzZXF1ZW5jZSkge1xyXG4gICAgICB0aGlzLmFwcHJvdmFsU2VxdWVuY2VzLmRlbGV0ZShpZCk7XHJcbiAgICAgIHRoaXMuc2F2ZVRvU3RvcmFnZSgpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vIEVuaGFuY2VkIGFwcHJvdmFsIHdvcmtmbG93XHJcbiAgYXN5bmMgcHJvY2Vzc0NvbmRpdGlvbmFsQXBwcm92YWwoZXhwZW5zZUlkLCBhcHByb3ZlcklkLCBzdGF0dXMsIGNvbW1lbnQpIHtcclxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgY29uc3QgZXhwZW5zZSA9IHRoaXMuZXhwZW5zZXMuZ2V0KGV4cGVuc2VJZCk7XHJcbiAgICBpZiAoIWV4cGVuc2UpIHJldHVybiBudWxsO1xyXG5cclxuICAgIGNvbnN0IGFwcHJvdmFsID0ge1xyXG4gICAgICBpZDogdXVpZHY0KCksXHJcbiAgICAgIGV4cGVuc2VJZCxcclxuICAgICAgYXBwcm92ZXJJZCxcclxuICAgICAgc3RhdHVzLFxyXG4gICAgICBjb21tZW50LFxyXG4gICAgICBzdGVwOiBleHBlbnNlLmN1cnJlbnRBcHByb3ZhbFN0ZXAgfHwgMCxcclxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICB9O1xyXG4gICAgYXdhaXQgdGhpcy5jcmVhdGVBcHByb3ZhbChhcHByb3ZhbCk7XHJcblxyXG4gICAgaWYgKHN0YXR1cyA9PT0gXCJyZWplY3RlZFwiKSB7XHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUV4cGVuc2UoZXhwZW5zZUlkLCB7IHN0YXR1czogXCJyZWplY3RlZFwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFwcHJvdmFsUnVsZXMgPSBhd2FpdCB0aGlzLmdldEFwcHJvdmFsUnVsZXNCeUNvbXBhbnkoZXhwZW5zZS5jb21wYW55SWQpO1xyXG4gICAgY29uc3QgYXBwbGljYWJsZVJ1bGVzID0gYXBwcm92YWxSdWxlcy5maWx0ZXIoXHJcbiAgICAgIChydWxlKSA9PlxyXG4gICAgICAgIHJ1bGUubWluQW1vdW50IDw9IGV4cGVuc2UuYW1vdW50ICYmIHJ1bGUubWF4QW1vdW50ID49IGV4cGVuc2UuYW1vdW50XHJcbiAgICApO1xyXG5cclxuICAgIGZvciAoY29uc3QgcnVsZSBvZiBhcHBsaWNhYmxlUnVsZXMpIHtcclxuICAgICAgaWYgKGF3YWl0IHRoaXMuY2hlY2tDb25kaXRpb25hbFJ1bGUoZXhwZW5zZUlkLCBydWxlKSkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUV4cGVuc2UoZXhwZW5zZUlkLCB7IHN0YXR1czogXCJhcHByb3ZlZFwiIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmV4dFN0ZXAgPSAoZXhwZW5zZS5jdXJyZW50QXBwcm92YWxTdGVwIHx8IDApICsgMTtcclxuICAgIGlmIChuZXh0U3RlcCA+PSAoZXhwZW5zZS5hcHByb3ZhbENoYWluIHx8IFtdKS5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlRXhwZW5zZShleHBlbnNlSWQsIHtcclxuICAgICAgICBzdGF0dXM6IFwiYXBwcm92ZWRcIixcclxuICAgICAgICBjdXJyZW50QXBwcm92YWxTdGVwOiBuZXh0U3RlcCxcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVFeHBlbnNlKGV4cGVuc2VJZCwge1xyXG4gICAgICAgIGN1cnJlbnRBcHByb3ZhbFN0ZXA6IG5leHRTdGVwLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGNoZWNrQ29uZGl0aW9uYWxSdWxlKGV4cGVuc2VJZCwgcnVsZSkge1xyXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgICBjb25zdCBhcHByb3ZhbHMgPSBhd2FpdCB0aGlzLmdldEFwcHJvdmFsc0J5RXhwZW5zZShleHBlbnNlSWQpO1xyXG4gICAgY29uc3QgYXBwcm92ZWRBcHByb3ZhbHMgPSBhcHByb3ZhbHMuZmlsdGVyKChhKSA9PiBhLnN0YXR1cyA9PT0gXCJhcHByb3ZlZFwiKTtcclxuXHJcbiAgICBpZiAocnVsZS5wZXJjZW50YWdlVGhyZXNob2xkICYmIHJ1bGUucGVyY2VudGFnZVRocmVzaG9sZCA+IDApIHtcclxuICAgICAgY29uc3QgdG90YWxBcHByb3ZlcnMgPSAocnVsZS5hcHByb3ZlcklkcyB8fCBbXSkubGVuZ3RoO1xyXG4gICAgICBjb25zdCBhcHByb3ZlZENvdW50ID0gYXBwcm92ZWRBcHByb3ZhbHMubGVuZ3RoO1xyXG4gICAgICBjb25zdCBwZXJjZW50YWdlID0gKGFwcHJvdmVkQ291bnQgLyB0b3RhbEFwcHJvdmVycykgKiAxMDA7XHJcbiAgICAgIGlmIChwZXJjZW50YWdlID49IHJ1bGUucGVyY2VudGFnZVRocmVzaG9sZCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJ1bGUuc3BlY2lmaWNBcHByb3ZlcklkKSB7XHJcbiAgICAgIGNvbnN0IGhhc1NwZWNpZmljQXBwcm92YWwgPSBhcHByb3ZlZEFwcHJvdmFscy5zb21lKFxyXG4gICAgICAgIChhKSA9PiBhLmFwcHJvdmVySWQgPT09IHJ1bGUuc3BlY2lmaWNBcHByb3ZlcklkXHJcbiAgICAgICk7XHJcbiAgICAgIGlmIChoYXNTcGVjaWZpY0FwcHJvdmFsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGIgPSBuZXcgTGlnaHREYXRhYmFzZSgpO1xyXG4iXSwibmFtZXMiOlsidjQiLCJ1dWlkdjQiLCJMaWdodERhdGFiYXNlIiwiY29uc3RydWN0b3IiLCJ1c2VycyIsIk1hcCIsImNvbXBhbmllcyIsImV4cGVuc2VzIiwiYXBwcm92YWxSdWxlcyIsImFwcHJvdmFsU2VxdWVuY2VzIiwiYXBwcm92YWxzIiwiZXhwZW5zZUNhdGVnb3JpZXMiLCJvY3JSZXN1bHRzIiwiaW5pdGlhbGl6ZWQiLCJpbml0aWFsaXplIiwic3RvcmVkRGF0YSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwiT2JqZWN0IiwiZW50cmllcyIsImluaXRpYWxpemVTYW1wbGVEYXRhIiwiZXJyb3IiLCJjb25zb2xlIiwiY29tcGFueSIsImlkIiwibmFtZSIsImN1cnJlbmN5IiwiY291bnRyeSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ1cGRhdGVkQXQiLCJzZXQiLCJhZG1pbiIsImVtYWlsIiwicm9sZSIsImNvbXBhbnlJZCIsIm1hbmFnZXIiLCJlbXBsb3llZSIsIm1hbmFnZXJJZCIsInNhdmVUb1N0b3JhZ2UiLCJzYXZlVGltZW91dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJmcm9tRW50cmllcyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJjcmVhdGVVc2VyIiwidXNlciIsImdldFVzZXIiLCJnZXQiLCJnZXRVc2VyQnlFbWFpbCIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImZpbmQiLCJ1cGRhdGVVc2VyIiwidXBkYXRlcyIsInVwZGF0ZWRVc2VyIiwidW5kZWZpbmVkIiwiZ2V0VXNlcnNCeUNvbXBhbnkiLCJmaWx0ZXIiLCJnZXRVc2Vyc0J5TWFuYWdlciIsImdldE1hbmFnZXIiLCJ1c2VySWQiLCJjcmVhdGVDb21wYW55IiwiZ2V0Q29tcGFueSIsImNyZWF0ZUV4cGVuc2UiLCJleHBlbnNlIiwiZ2V0RXhwZW5zZSIsImdldEV4cGVuc2VzQnlVc2VyIiwiZ2V0RXhwZW5zZXNCeUNvbXBhbnkiLCJnZXRQZW5kaW5nRXhwZW5zZXNGb3JBcHByb3ZlciIsImFwcHJvdmVySWQiLCJzdGF0dXMiLCJhcHByb3ZhbENoYWluIiwiY3VycmVudFN0ZXAiLCJjdXJyZW50QXBwcm92YWxTdGVwIiwibGVuZ3RoIiwiZ2V0QXBwcm92ZWRFeHBlbnNlc0ZvckFwcHJvdmVyIiwiYXBwcm92YWwiLCJtYXAiLCJleHBlbnNlSWQiLCJhcHByb3ZhbERldGFpbHMiLCJnZXRBbGxFeHBlbnNlc0ZvckFwcHJvdmVyIiwicGVuZGluZ0V4cGVuc2VzIiwiYXBwcm92ZWRFeHBlbnNlcyIsInVwZGF0ZUV4cGVuc2UiLCJ1cGRhdGVkRXhwZW5zZSIsImNyZWF0ZUFwcHJvdmFsIiwiZ2V0QXBwcm92YWxzQnlFeHBlbnNlIiwiY3JlYXRlQXBwcm92YWxSdWxlIiwicnVsZSIsImdldEFwcHJvdmFsUnVsZXNCeUNvbXBhbnkiLCJpc0FjdGl2ZSIsImdldEFwcHJvdmFsUnVsZSIsInVwZGF0ZUFwcHJvdmFsUnVsZSIsInVwZGF0ZWRSdWxlIiwiZGVsZXRlQXBwcm92YWxSdWxlIiwiZGVsZXRlIiwiY3JlYXRlQXBwcm92YWxTZXF1ZW5jZSIsInNlcXVlbmNlIiwiZ2V0QXBwcm92YWxTZXF1ZW5jZXNCeUNvbXBhbnkiLCJnZXRBcHByb3ZhbFNlcXVlbmNlIiwidXBkYXRlQXBwcm92YWxTZXF1ZW5jZSIsInVwZGF0ZWRTZXF1ZW5jZSIsImRlbGV0ZUFwcHJvdmFsU2VxdWVuY2UiLCJwcm9jZXNzQ29uZGl0aW9uYWxBcHByb3ZhbCIsImNvbW1lbnQiLCJzdGVwIiwiYXBwbGljYWJsZVJ1bGVzIiwibWluQW1vdW50IiwiYW1vdW50IiwibWF4QW1vdW50IiwiY2hlY2tDb25kaXRpb25hbFJ1bGUiLCJuZXh0U3RlcCIsImFwcHJvdmVkQXBwcm92YWxzIiwiYSIsInBlcmNlbnRhZ2VUaHJlc2hvbGQiLCJ0b3RhbEFwcHJvdmVycyIsImFwcHJvdmVySWRzIiwiYXBwcm92ZWRDb3VudCIsInBlcmNlbnRhZ2UiLCJzcGVjaWZpY0FwcHJvdmVySWQiLCJoYXNTcGVjaWZpY0FwcHJvdmFsIiwic29tZSIsImRiIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db-light.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/uuid","vendor-chunks/jose","vendor-chunks/bcryptjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.js&appDir=C%3A%5CUsers%5Cknsja%5CDesktop%5COdoo%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cknsja%5CDesktop%5COdoo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();